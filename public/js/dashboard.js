"use strict";var url={full:location.href},loc="";function parseURL(){url.extended=url.full.replace(/#.*/,function(e){return url.hash=e,""}).replace(/\?.*/,function(e){return url.fragment=e,""}).replace(/https*:\/\/[^\/]*\//,function(e){return url.domain=e.slice(0,-1),""}).split("/"),loc=url.extended[0]}function poof(){var t=0,a=0,n=$("#poof");!function e(){a<6&&(n.css({backgroundPosition:"0 "+t+"px"}),t-=32,a++,setTimeout(e,80))}(),setTimeout(function(){n.hide()},480)}var reorder={sortable:null,run:function(e,t,a){var n={};$("#"+e).find(t).each(function(e){n[e]=$(this).data("id")}),$.ajax({type:"PATCH",url:a,data:{order:n,_token:$('input[name="_token"]').val()}}).always(function(e){if("success"!==e)return ChangeCategories.iChangeCategories()})},create:function(e,t,a,n){this.sortable=Sortable.create(document.getElementById(e),{handle:a,onUpdate:function(){reorder.run(e,t,n)}})}},prompt={listen:function(){$(document).keyup(function(e){27===e.keyCode&&prompt.destroy()}),$(".prompt, .prompt .center").bind("click",function(e){e.target===this&&prompt.destroy()})},inject:function(e){$("body").append("<div class='prompt'><div class='center'><div class='box'>"+e+"</div></div></div>")},destroy:function(){$(".prompt").remove()},input:function(e,a,n){var i="<label for='prompt_input'>"+e+"</label><input type='text' name='itemname'><button>Submit</button>",t=function(e){var t=i.val().trim();t.match(a)||""===t?($(".prompt .box").addClass("animated shake"),setTimeout(function(){$(".prompt .box").removeClass("animated shake")},1e3)):(e.input=t,prompt.destroy(),n(e))};prompt.inject(i),prompt.listen(),(i=$(".prompt input[name='itemname']")).focus(),i.keypress(function(e){13===e.which&&t(e)}),$(".prompt button").on("click",t)}},access={Init:function(e){switch(e){case"logins":access.logins.Init();break;case"users":access.users.Init()}},logins:{Init:function(){$(".table").tablesorter()}},users:{Init:function(){$(".table").tablesorter(),access.users.AddUser(),access.users.DeleteUser()},AddUser:function(){var a=$(".new-users"),t=function e(t){t.target!==this&&27!==t.keyCode||($(".new-users, .overlay-user, .add-user").off("click",e),$(document).off("keyup",e),a.fadeOut(500))};$(".new-user").off("click").on("click",function(e){a.fadeIn(500),$(".new-users, .overlay-user, .add-user").off("click",t).on("click",t),$(document).off("keyup",t).on("keyup",t)})},DeleteUser:function(){var e=$(".delete-user"),n=!1;e.off("click").on("click",function(e){var t=$(this),a=t.closest(".user");e.preventDefault(),!1===n&&(n=!0,$("#poof").css({left:e.pageX-24+"px",top:e.pageY-24+"px"}).show(),poof(),a.fadeOut(500),$.ajax({type:"DELETE",url:"/dashboard/access/users/delete",data:{id:t.data("id"),_token:$("#token").val(),project:Page[0]}}).always(function(e){"success"===e?a.remove():a.fadeIn(500),n=!1}))})}}},availability={Init:function(e){switch(e){case"table":availability.tableInput.Init(),availability.tableNavigation.Init()}},tableInput:{Init:function(){availability.tableInput.AddUnit(),availability.tableInput.UpdateUnit(),availability.tableInput.DeleteUnit()},AddUnit:function(){var a=$("html, body"),n=$("#add-unit"),e=$("#new-unit"),t=$("#new-units"),i=$(".topbar").first().height(),o={},s=!1;e.off("click").on("click",function(e){t.fadeIn(500),n.off("click").on("click",function(e){e.preventDefault(),!1===s&&(s=!0,n.prop("disabled",!0),o={building:$("#building").val(),residence:$("#residence").val(),beds:$("#beds").val(),baths:$("#baths").val(),area:$("#area").val(),exterior:$("#exterior").val(),price:$("#price").val(),cc:$("#cc").val(),taxes:$("#taxes").val(),floor_plan:$("#floor_plan").val(),available:$("#available").is(":checked")?1:0,_token:$("#token").val()},$.ajax({type:"POST",url:"/dashboard/availability/data/new",data:o}).always(function(e){var t=void 0;if($(".error").removeClass("error"),"success"===e)return Page[1]="table",ChangeCategories.iChangeCategories();for(t in 0,e.responseJSON.errors)$("#"+t).length&&($("#"+t).addClass("error"),0);$(".error").length?a.animate({scrollTop:$(".error").first().offset().top-i},200,function(){n.prop("disabled",!1)}):n.prop("disabled",!1)}),n.prop("disabled",!1),s=!1)}),$(document).keyup(function(e){27===e.keyCode&&!1===s&&(n.off("click"),t.fadeOut(500))})})},UpdateUnit:function(){var n=$("tr.unit input, tr.unit select"),i=[],e=function(e){var t=$(e),a=t.data("id")+t.attr("id");clearTimeout(i[a]),i[a]=setTimeout(function(){var e=void 0;n.prop("disabled",!0),t.parent().removeClass("success failure"),t.parent().addClass("sending"),e="checkbox"===t.attr("type")?t.is(":checked")?1:0:t.val(),$.ajax({type:"PUT",url:"/dashboard/availability/data/update",data:{id:t.data("id"),name:t.attr("name"),value:e,_token:$("#token").val()}}).always(function(e){t.parent().removeClass("sending success failure"),"success"===e?t.parent().addClass("success"):t.parent().addClass("failure"),n.prop("disabled",!1),"text"===t.attr("type")&&t.trigger("click"),setTimeout(function(){t.parent().removeClass("sending success failure")},1e3)})},1e3)};n.off("input change propertychange paste"),$('tr.unit input[type="text"]').off("input propertychange paste").on("input propertychange paste",function(){e(this)}),$('tr.unit select, tr.unit input[type="checkbox"]').off("change").on("change",function(){e(this)})},DeleteUnit:function(){var e=$(".delete-unit"),n=!1;e.off("click").on("click",function(e){var t=$(this),a=t.closest(".unit");e.preventDefault(),!1===n&&(n=!0,$("#poof").css({left:e.pageX-24+"px",top:e.pageY-24+"px"}).show(),poof(),a.fadeOut(500),$.ajax({type:"DELETE",url:"/dashboard/availability/data/delete",data:{id:t.data("id"),_token:$("#token").val(),project:Page[0]}}).always(function(e){"success"===e?a.remove():a.fadeIn(500),n=!1}))})}},tableNavigation:{Init:function(){availability.tableNavigation.KeyboardNavigation(),availability.tableNavigation.MouseNavigation()},KeyboardNavigation:function(){$(".table td").keyup(function(e){var t=$(this),a=t.data("col"),n=t.data("row"),i=void 0;switch(e.keyCode){case 37:(i=$('td[data-col="'+(a-1)+'"][data-row="'+n+'"]').find("input")).length||(i=t.find("input")),i.focus(),i.select();break;case 38:(i=$('td[data-col="'+a+'"][data-row="'+(n-1)+'"]').find("input")).length||(i=t.find("input")),i.focus(),i.select();break;case 39:(i=$('td[data-col="'+(a+1)+'"][data-row="'+n+'"]').find("input")).length||(i=t.find("input")),i.focus(),i.select();break;case 40:(i=$('td[data-col="'+a+'"][data-row="'+(n+1)+'"]').find("input")).length||(i=t.find("input")),i.focus(),i.select()}})},MouseNavigation:function(){$(".table input:not(.new)").off("click").on("click",function(e){if(e.ctrlKey)return!1;$(this).select()})}}},content={Init:function(e){switch(e){case"meta":content.meta.Init();break;case"pages":content.pages.Init()}},meta:{Init:function(){content.ItemSlider(),content.DeleteItem("/dashboard/content/meta/delete"),content.meta.EditItem(),content.meta.AddItem(),content.ToggleItem("/dashboard/content/meta/edit")},EditItem:function(){var n=[];$(".items .item-body form input").off("input propertychange paste").on("input propertychange paste",function(e){var t=$(this),a=t.data("page")+t.data("name");t.next(".status").find(".waiting").fadeIn(500),clearTimeout(n[a]),n[a]=setTimeout(function(){var e=$(this),t=e.next(".status");t.find(".waiting").fadeOut(500,function(){t.find(".sending").fadeIn(500)}),$.ajax({type:"PUT",url:"/dashboard/content/meta/edit",data:{id:e.data("id"),name:e.data("name"),value:e.val(),_token:$('input[name="_token"]').val()}}).always(function(e){t.find(".sending").fadeOut(500,function(){t.children().eq("success"===e?2:3).fadeIn(500,function(){$(this).fadeOut(500)})})}),setTimeout(function(){t.find(".sending").fadeOut(500,function(){t.children().eq(2).fadeIn(500,function(){$(this).fadeOut(500)})})},1200)}.bind(this),1e3)})},AddItem:function(){$(".new-item").off("click").on("click",function(){for(var t=$(".item.default").eq(0).clone({deepWithDataAndEvents:!0}),e=$("ul.items li"),a="",n=0;n<e.length;n++)a+=$(e[n]).find(".item-info").text().trim(),a+=n!==e.length-1?"|":"";a=new RegExp("^("+a+")$","gi"),prompt.input("Page",a,function(e){t.find(".item-info").text(e.input),t.find('input[name="title"]').val(""),t.find('input[name="description"]').val(""),t.find('input[name="keywords"]').val(""),$.ajax({type:"PUT",url:"/dashboard/content/meta/create",data:{page:e.input.replace(/\//g,"."),_token:$('input[name="_token"]').val()}}).always(function(e){if("success"===e)return ChangeCategories.iChangeCategories()})})})}},pages:{Init:function(){""!==Page[3]?content.pages.SectionContentInit():""!==Page[2]?content.pages.SectionsListInit():content.pages.PagesListInit()},PagesListInit:function(){$(".item-edit").each(function(){var e=$(this),t=e.data("name");e.off("click").on("click",function(e){return e.preventDefault(),Page[2]=t,ChangeCategories.iChangeCategories()})})},SectionsListInit:function(){var t=$(window),e=$("#sections-list"),a=!1,n=function(e){return e.preventDefault(),t.off("popstate"),Page[2]="",ChangeCategories.iChangeCategories()};t.off("popstate").on("popstate",n),$(".back-button").off("click").on("click",n),$(".new-item").off("click").on("click",function(){a||(a=!0,$.ajax({type:"POST",url:"/dashboard/content/sections/new",data:{page:Page[2],type:$("#new-type").val(),_token:$("#token").val()}}).always(function(e){if(a=!1,null!==e.toString().match(/^[0-9][0-9]*$/))return Page[3]=e,Store.newPageSection=!0,ChangeCategories.iChangeCategories()}))}),$(".item-edit").each(function(){var e=$(this),t=e.data("id");e.off("click").on("click",function(e){return e.preventDefault(),Page[3]=t,ChangeCategories.iChangeCategories()})}),content.DeleteItem("/dashboard/content/sections/delete"),content.ToggleItem("/dashboard/content/sections/edit"),"reorder"===e.data("sort-style")&&reorder.create("sections-list","li.item",".sort-icon-solo","/dashboard/content/sections/reorder")},SectionContentInit:function(){var t=$(window),e=$("#section-edit"),a=e.find(".content-input"),i=e.find(".content-text"),c=(e.find(".content-image"),e.find("#submit")),f=e.data("section"),r=$("#token"),n="newPageSection"in Store&&Store.newPageSection,o={},d=!1,s=function(e){if(e.preventDefault(),t.off("popstate"),delete Store.contentTextArray,!n)return Page[3]="",ChangeCategories.iChangeCategories();$.ajax({type:"DELETE",url:"/dashboard/content/sections/delete",data:{id:Page[3],_token:$('input[name="_token"]').val()}}).always(function(e){return Page[3]="",ChangeCategories.iChangeCategories()})},l=function(){!0,c.removeClass("disabled")};"newPageSection"in Store&&delete Store.newPageSection,c.off("click").on("click",function(e){var n;e.preventDefault(),d||(d=!0,c.addClass("submitting"),n=function(e,t){o.values[e]=t},o={id:f,values:{},_token:r.val()},a.each(function(){var e=$(this),t=e.attr("id"),a=e.val();n(t,a)}),i.each(function(){var e=$(this).attr("id"),t=Store.contentTextArray[e].value();n(e,t)}),$.ajax({type:"POST",url:"/dashboard/content/sections/update",data:o}).always(function(e){var n,i,o,s;"success"===e?(n=$(".content-image"),i=n.length-1,s=function(){return delete Store.contentTextArray,d=!1,ChangeCategories.iChangeCategories()},(o=0)<=i?function t(){var e=n.eq(o);if(""!==e.val()){var a=new FormData;a.append("file",e[0].files[0]),a.append("path",e.data("image-path")),$.ajax({type:"POST",url:"/dashboard/content/sections/image-upload",data:a,processData:!1,contentType:!1,beforeSend:function(e){e.setRequestHeader("X-CSRF-TOKEN",r.val())}}).always(function(e){"success"===e?o<i?(o++,t()):s():(c.removeClass("submitting"),d=!1)})}else o<i?(o++,t()):s()}():s()):(c.removeClass("submitting"),d=!1)}))}),t.off("popstate").on("popstate",s),$(".back-button").off("click").on("click",s),$(".edit-image").off("click").on("click",function(e){var t=$("#image-editor"),a=t.find(".image-editor-overlay-edit-image").first(),n=t.find(".btn-submit").first(),i=t.find(".btn-cancel").first(),o=$(e.target).data("image-url"),s=$(e.target).data("image-file"),c=void 0,r=!1,p=void 0,d=function(e){i.off("click"),n.off("click"),$("html").removeClass("no-scroll"),t.fadeOut(function(){void 0!==p&&(p.destroy(),p=void 0),a.text("")}),void 0!==e&&e()},l=function(){r||void 0===p||(r=!0,$.ajax({type:"POST",url:"/dashboard/content/sections/image-edit",data:{id:f,image:s,x:p.getData(!0).x,y:p.getData(!0).y,width:p.getData(!0).width,height:p.getData(!0).height,_token:$("#token").val()}}).always(function(e){r=!1,"success"===e&&d(function(){return ChangeCategories.iChangeCategories()})}))};a.html('<img id="image-editor-img" src="'+o+'" />'),(c=$("#image-editor-img")).on("load",function(){p=new Cropper(c[0],{responsive:!1,scalable:!1,zoomable:!1}),this.addEventListener("cropend",function(e){var t=p.getCropBoxData().width,a=p.getCropBoxData().height,n=p.getCropBoxData().top,i=n+a,o=p.getCropBoxData().left,s=o+t,c=p.getCanvasData().width,r=p.getCanvasData().height,d=p.getCanvasData().top,l=d+r,f=p.getCanvasData().left,u=f+c;o<f&&u<s?p.setCropBoxData({width:c,left:f}):s<f?p.setCropBoxData({width:0,left:f}):o<f?p.setCropBoxData({width:t-(f-o),left:f}):u<o?p.setCropBoxData({width:0,left:u}):u<s&&p.setCropBoxData({width:u-o}),n<d&&l<i?p.setCropBoxData({height:r,top:d}):i<d?p.setCropBoxData({height:void 0,top:d}):n<d?p.setCropBoxData({height:a-(d-n),top:d}):l<n?p.setCropBoxData({height:0,top:l}):l<i&&p.setCropBoxData({height:l-n})}),n.off("click").on("click",l).removeClass("disabled"),i.off("click").on("click",d),$("html").addClass("no-scroll"),t.fadeIn()})}),Store.contentTextArray=[],i.each(function(){var e=$(this),t=e.attr("id");e.parent().find(".CodeMirror").length||(Store.contentTextArray[t]=new SimpleMDE({element:this,toolbar:["bold","italic","|","heading-1","heading-2","heading-3","|","quote","unordered-list","ordered-list","link"],blockStyles:{italic:"_"},autoDownloadFontAwesome:!1,tabSize:4,spellChecker:!1}),setTimeout(function(){Store.contentTextArray[t].value(e.attr("value"))},100))}),e.find("input").on("input change",l),e.find(".CodeMirror").on("keydown",l),e.find("select").on("change",l)}},ItemSlider:function(){$(".item-info").off("click").on("click",function(e){$(this).parent().next(".item-body").stop().slideToggle(250)})},DeleteItem:function(n){$(".item-delete").off("click").on("click",function(e){var t=$(this),a=t.closest("li.item");$("#poof").css({left:e.pageX-24+"px",top:e.pageY-24+"px"}).show(),poof(),a.slideUp(500),$.ajax({type:"DELETE",url:n,data:{id:t.data("id"),_token:$('input[name="_token"]').val()}}).always(function(e){"success"===e?a.remove():a.slideDown(500)})})},ToggleItem:function(i){$(".toggle-item").off("click").on("click",function(){var e=$(this),t=e.closest("li.item"),a=t.find(".toggle-item, .preview-item"),n=!e.hasClass("item-enabled");t.toggleClass("active"),a.toggleClass("item-disabled item-enabled"),e.text(n?"ENABLED":"DISABLED"),$.ajax({type:"PUT",url:i,data:{id:e.data("id"),name:"enabled",value:n,_token:$('input[name="_token"]').val()}}).always(function(e){if("success"!==e)return ChangeCategories.iChangeCategories()})})}},press={Init:function(e){switch(e){case"articles":press.articles.Init()}},articles:{Init:function(){press.ItemSlider(),press.DeleteItem("/dashboard/press/articles/delete"),press.DeleteImage(),press.DeletePdf(),press.articles.ToggleItem(),press.articles.EditItem(),press.articles.EditImage(),press.articles.EditPdf(),press.articles.AddArticle(),press.articles.ReorderPress(),$(".date-picker").each(function(){var e=$(this);e.hasClass("hasDatepicker")||e.datepicker({dateFormat:"yy-mm-dd",onSelect:function(){e.val($.datepicker.formatDate("yy-mm-dd",e.datepicker("getDate"))).trigger("propertychange")}})}),$(".file-input").off("change").on("change",function(){var e=$(this),t=e.parent().find(".file-label span"),a=e.parent().find(".file-clear"),n=e.val();t.text(n),""===e.val()?a.removeClass("active"):a.addClass("active")})},ToggleItem:function(){$(".toggle-item").off("click").on("click",function(){var e=$(this),t=e.closest("li.item"),a=!e.hasClass("item-enabled");t.toggleClass("active"),e.toggleClass("item-disabled item-enabled"),e.text(a?"ENABLED":"DISABLED"),$.ajax({type:"PUT",url:"/dashboard/press/articles/edit",data:{id:e.data("id"),name:"enabled",value:a,_token:$('input[name="_token"]').val()}}).always(function(e){if("success"!==e)return ChangeCategories.iChangeCategories()})})},EditItem:function(){var i=500,o=[];$(".items .item-body form input:not(.file-upload-input), .items .item-body form textarea").off("input propertychange paste").on("input propertychange paste",function(e){var t=$(this),a=t.parent().find(".status"),n=t.data("page")+t.data("name")+t.data("language");a.find(".waiting").fadeIn(i),clearTimeout(o[n]),o[n]=setTimeout(function(){a.find(".waiting").fadeOut(i,function(){a.find(".sending").fadeIn(i)}),$.ajax({type:"PUT",url:"/dashboard/press/articles/edit",data:{id:t.data("id"),language:t.data("language"),name:t.data("name"),value:t.val(),_token:$('input[name="_token"]').val()}}).always(function(e){a.children().eq(1).fadeOut(i,function(){a.children().eq("success"===e?2:3).fadeIn(i,function(){$(this).fadeOut(i),"title"===t.data("name")&&t.closest(".item").find(".item-info").text(t.val())})})}),setTimeout(function(){a.find(".sending").fadeOut(i,function(){a.children().eq(2).fadeIn(i,function(){$(this).fadeOut(i)})})},1200)},1e3)})},EditImage:function(){var s=500,c=[];$(".items .item-body form input.file-upload-input.image").off("change").on("change",function(e){var t=$(this),a=t.parent().next(".status"),n=t.parent().find(".thumb"),i=n.attr("src"),o=t.data("page")+t.data("name")+t.data("language");a.find(".waiting").fadeIn(s),clearTimeout(c[o]),c[o]=setTimeout(function(){a.find(".waiting").fadeOut(s,function(){a.find(".sending").fadeIn(s)}),press.UploadImage(t.data("id"),t,function(e){e?a.children().eq(1).fadeOut(s,function(){a.children().eq(2).fadeIn(s,function(){$(this).fadeOut(s),n.attr("src",i+"?"+(new Date).getTime()),t.parent().addClass("has-file")})}):a.find(".sending").fadeOut(s,function(){a.children().eq(3).fadeIn(s,function(){$(this).fadeOut(s)})}),setTimeout(function(){a.find(".sending").fadeOut(s,function(){a.children().eq(2).fadeIn(s,function(){$(this).fadeOut(s)})})},1200)})},1e3)})},EditPdf:function(){var i=500,o=[];$(".items .item-body form input.file-upload-input.pdf").off("change").on("change",function(e){var t=$(this),a=t.parent().next(".status"),n=t.data("page")+t.data("name")+t.data("language");a.find(".waiting").fadeIn(i),clearTimeout(o[n]),o[n]=setTimeout(function(){a.find(".waiting").fadeOut(i,function(){a.find(".sending").fadeIn(i)}),press.UploadPdf(t.data("id"),t,function(e){e?a.children().eq(1).fadeOut(i,function(){a.children().eq(2).fadeIn(i,function(){$(this).fadeOut(i),t.parent().addClass("has-file")})}):a.find(".sending").fadeOut(i,function(){a.children().eq(3).fadeIn(i,function(){$(this).fadeOut(i)})}),setTimeout(function(){a.find(".sending").fadeOut(i,function(){a.children().eq(2).fadeIn(i,function(){$(this).fadeOut(i)})})},1200)})},1e3)})},AddArticle:function(){var t=$("#submit"),e=$(".new-article"),a=$(".new-articles"),n=($("#new-article-form"),$("#image")),i=$("#image-clear"),o=$("#pdf"),s=$("#pdf-clear"),c=!1,r=function e(t){t.target!==this&&27!==t.keyCode||($(".new-articles, .overlay-article, .add-article").off("click",e),$(document).off("keyup",e),a.fadeOut(500))},d=function(){return c=!1,ChangeCategories.iChangeCategories()};e.off("click").on("click",function(){a.fadeIn(500),$(".new-articles, .overlay-article, .add-article").off("click",r).on("click",r),$(document).off("keyup",r).on("keyup",r)}),i.off("click").on("click",function(e){e.preventDefault(),n.val("").trigger("change")}),s.off("click").on("click",function(e){e.preventDefault(),o.val("").trigger("change")}),t.off("click").on("click",function(e){e.preventDefault(),c||(c=!0,t.addClass("submitting"),$.ajax({type:"POST",url:"/dashboard/press/articles/new",data:{title:$("#title").val(),publisher:$("#publisher").val(),date:$("#date").val(),description:$("#description").val(),_token:$('input[name="_token"]').val()}}).always(function(e){null!==e.toString().match(/^[0-9][0-9]*$/)?""===n.val()&&""===o.val()?d():""===n.val()?press.UploadPdf(e,$("#pdf"),d):press.UploadImage(e,$("#image"),function(){""===o.val()?d():press.UploadPdf(e,$("#pdf"),d)}):(t.removeClass("submitting"),c=!1)}))})},ReorderPress:function(){var a={};Sortable.create($(".items")[0],{handle:".item-sort",onUpdate:function(){var e=$(".items .press-item"),t=e.length-1;e.each(function(e){a[$(this).data("id")]=t-e}),$.ajax({type:"POST",url:"/dashboard/press/articles/press-reorder",data:{order:a,_token:$("#token").val()}}).always(function(e){if("success"!==e)return $(window).off("popstate"),ChangeCategories.iChangeCategories()})}})}},ItemSlider:function(){$(".item-info").off("click").on("click",function(e){$(this).parent().next(".item-body").stop().slideToggle(250)})},DeleteItem:function(n){$(".item-delete").off("click").on("click",function(e){var t=$(this),a=t.closest("li.item");$("#poof").css({left:e.pageX-24+"px",top:e.pageY-24+"px"}).show(),poof(),a.slideUp(500),$.ajax({type:"DELETE",url:n,data:{id:t.data("id"),_token:$('input[name="_token"]').val(),project:Page[0]}}).always(function(e){"success"===e?a.remove():a.slideDown(500)})})},UploadImage:function(e,t,a){var n=new FormData,i=!1;n.append("file",t[0].files[0]),n.append("id",e),$.ajax({type:"POST",url:"/dashboard/press/articles/image-upload",data:n,processData:!1,contentType:!1,beforeSend:function(e){e.setRequestHeader("X-CSRF-TOKEN",$('input[name="_token"]').val())}}).always(function(e){"success"===e&&(i=!0),void 0!==a&&a(i)})},DeleteImage:function(){$(".file-upload-delete.image").off("click").on("click",function(e){var t=$(this),a=t.closest(".file-upload");$.ajax({type:"POST",url:"/dashboard/press/articles/image-delete",data:{id:t.data("id"),_token:$('input[name="_token"]').val(),project:Page[0]}}).always(function(e){"success"===e&&t.transition({opacity:0},200,function(){a.removeClass("has-file"),t.css({opacity:1})})})})},UploadPdf:function(e,t,a){var n=new FormData,i=!1;n.append("file",t[0].files[0]),n.append("path",e+".pdf"),$.ajax({type:"POST",url:"/dashboard/press/articles/pdf-upload",data:n,processData:!1,contentType:!1,beforeSend:function(e){e.setRequestHeader("X-CSRF-TOKEN",$('input[name="_token"]').val())}}).always(function(e){"success"===e&&(i=!0),void 0!==a&&a(i)})},DeletePdf:function(){$(".file-upload-delete.pdf").off("click").on("click",function(e){var t=$(this),a=t.closest(".file-upload");$.ajax({type:"POST",url:"/dashboard/press/articles/pdf-delete",data:{id:t.data("id"),_token:$('input[name="_token"]').val(),project:Page[0]}}).always(function(e){"success"===e&&t.transition({opacity:0},200,function(){a.removeClass("has-file"),t.css({opacity:1})})})})}},Page=void 0,LastCategory=void 0,Store={},ActiveElements={All:function(){ActiveElements.SetActiveTopbarItem(),ActiveElements.SetActiveSidebarItem()},SetActiveSidebarItem:function(){var e="link-"+Page[0];$(".sidebar li").removeClass("active"),""!==Page[0]&&(""!==Page[1]&&(e+="-"+Page[1]),""!==Page[2]&&(e+="-"+Page[2]),$(".sidebar li."+e).addClass("active"))},SetActiveTopbarItem:function(){$(".topbar li").removeClass("active"),$(".topbar li#"+(""===Page[1]?"home":Page[1])).addClass("active")}},ChangeCategories={ChangeMainCategory:function(){$(".sidebar").find("li, .sidebar-logo").off("click").on("click",function(){var e=$(this).data("category"),t=$(this).data("page"),a=$(this).data("subpage");return(e!==Page[0]||t!==Page[1]||a!==Page[2])&&(Page[0]=e,Page[1]=t,Page[2]=a,Page[3]="",ChangeCategories.iChangeCategories())})},ChangeSubCategory:function(){$(".topbar ul li").off("click").on("click",function(){var e=$(this).attr("id");return Page[1]="home"===e?"":e,Page[2]="",Page[3]="",ChangeCategories.iChangeCategories()})},iChangeCategories:function(e){var t=Page.join("/");t="/"===t?"":t,Page[0]=void 0===Page[0]?"":Page[2],t=("/dashboard/"+t.replace(/\/\/|\/$/,"")).replace(/\/\/|\/$/,""),history.pushState(null,null,t),Page=GetPage(),ActiveElements.All(),LoadNewContent(e)},RunPageScripts:function(){switch(Page[0]){case"access":access.Init(Page[1]);break;case"content":content.Init(Page[1]);break;case"availability":availability.Init(Page[1]);break;case"press":press.Init(Page[1])}},ChangePageOptions:function(){var e=$(".page-options")[0];(e=void 0===e?{}:e.dataset).container?$("#dashboard-container").addClass(e.container):$("#dashboard-container").removeClass()}};function GetPage(){return[location.href.split("/")[4],location.href.split("/")[5],location.href.split("/")[6],location.href.split("/")[7]].map(function(e){return void 0===e?"":e.split("?")[0].split("#")[0]})}function LoadNewContent(e){var t=$(".loading"),a=!1,n=function(e){a||(a=!0,t.fadeOut(250),$("#dashboard-container").html(e.responseText).fadeIn(100))},i=function(){0===[".topbar","#dashboard-container"].filter(function(e){return"none"===$(e).css("display")}).length&&(ActiveElements.SetActiveTopbarItem(),ChangeCategories.RunPageScripts(),ChangeCategories.ChangePageOptions(),$(".loading").fadeOut(250),void 0!==e&&e(),""!==Page[0]&&$(".no-click").removeClass("no-click"))};t.fadeIn(250),$("#dashboard-container").fadeOut(100),Page[0]!==LastCategory?($(".topbar").fadeOut(100),LastCategory=Page[0],setTimeout(function(){$(".topbar > .page-title").text(Page[0]),$.get("/dashboard/get-that-subnav/"+Page[0].replace(/\/\/|\/$/,""),function(e){$("#topbar-content").html(e),$(".topbar").fadeIn(100,ChangeCategories.ChangeSubCategory)}).fail(n)},100)):ChangeCategories.ChangeSubCategory(),setTimeout(function(){$.get("/dashboard/get-that-content/"+Page.join("/").replace(/\/\/|\/$/,""),function(e){$("#dashboard-container").html(e),$("#dashboard-container").fadeIn(100,i)}).fail(n)},100)}$(function(){Page=GetPage(),ActiveElements.All(),ChangeCategories.ChangeMainCategory(),LoadNewContent()});